<style>
  .tsw-countdown {
    --tsw-font-display: "TeleNeo Web", var(--phx--text-family-brand), -apple-system, BlinkMacSystemFont, "Segoe UI",
      Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
    --tsw-font-main: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif,
      "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";

    --tsw-font-size: 16px;
    --color-brand-primary-400: #e20074;
    --color-brand-grayscale-900: #1c1c1c;
    --color-brand-grayscale-white: #fff;

    --countdown-text-color: var(--color-brand-grayscale-900);
    --countdown-background-color: var(--color-brand-grayscale-white);
    --time-unit-text-color: var(--color-brand-grayscale-white);
    --time-unit-background-color: var(--color-brand-grayscale-900);

    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 2rem;
    padding: 2rem;
    font-family: var(--tsw-font-main);
    color: var(--countdown-text-color);
  }

  .tsw-countdown.dark-theme {
    --countdown-text-color: var(--color-brand-grayscale-white);
    --countdown-background-color: var(--color-brand-grayscale-900);
    --time-unit-text-color: var(--color-brand-grayscale-900);
    --time-unit-background-color: var(--color-brand-grayscale-white);
  }

  /* Clock */

  .tsw-countdown-clock {
    display: grid;
    grid-template-columns: 1fr auto 1fr auto 1fr auto 1fr;
    align-items: center;
    gap: 1rem;
  }

  .tsw-countdown-clock .tsw-time-unit {
    flex: 1;
    text-align: center;
    padding: 1rem;
    color: var(--time-unit-text-color);
    background-color: var(--time-unit-background-color);
    border-radius: 0.5rem;
  }

  .tsw-countdown-clock .tsw-time-unit .tsw-number {
    display: block;
    font-size: 3rem;
    line-height: 4rem;
    font-weight: 700;
    color: var(--color-brand-primary-400);
  }

  .tsw-countdown-clock .tsw-time-colon {
    font-size: 3rem;
    font-weight: 800;
  }

  /* Status */

  .tsw-countdown-status {
    text-align: center;
  }
  .tsw-countdown-status .tsw-countdown-status-alert {
    margin: 0;
    color: var(--color-brand-primary-400);
  }
</style>

<div class="tsw-countdown">
  <div class="tsw-countdown-clock">
    <div class="tsw-time-unit">
      <span class="tsw-countdown-days tsw-number">--</span>
      <span>Days</span>
    </div>
    <span class="tsw-time-colon">:</span>
    <div class="tsw-time-unit">
      <span class="tsw-countdown-hours tsw-number">--</span>
      <span>Hours</span>
    </div>
    <span class="tsw-time-colon">:</span>
    <div class="tsw-time-unit">
      <span class="tsw-countdown-minutes tsw-number">--</span>
      <span>Minutes</span>
    </div>
    <span class="tsw-time-colon">:</span>
    <div class="tsw-time-unit">
      <span class="tsw-countdown-seconds tsw-number">--</span>
      <span>Seconds</span>
    </div>
  </div>

  <div class="tsw-countdown-status">
    <p class="tsw-countdown-status-alert"></p>
  </div>

  <div
    id="tsw-countdown-a11y-alert"
    role="alert"
    aria-live="assertive"
    style="position: absolute; width: 0; height: 0; clip: rect(0, 0, 0, 0)"
  ></div>
</div>

<script>
  const CountDownClock = {
    countDownToThisTime: null,
    countDown: null,
    timeZoneForTarget: "local",
    urgencyInterval: 1,
    a11yAlertInterval: 10,
    init(seletedDateArg, timeZoneArg, urgencyIntervalArg, a11yAlertIntervalArg) {
      this.countDownEl = window.npi.querySelector(".tsw-countdown");
      if (!this.countDownEl) {
        return;
      }
      if (a11yAlertIntervalArg !== undefined) {
        if (!Number.isInteger(a11yAlertIntervalArg)) {
          throw new Error("Argument is not a number");
        }
        this.a11yAlertInterval = a11yAlertIntervalArg;
      }
      this.timeZoneForTarget = timeZoneArg;
      this.urgencyInterval = urgencyIntervalArg;
      this.countDownToThisTime = this.setTimeZoneForTarget(seletedDateArg);
      this.countDown = this.startCountDown();
    },
    setTimeZoneForTarget(date) {
      if (this.timeZoneForTarget === "eastern") {
        // Set time zone of input date/time using Luxon DateTime object
        const overrideZone = luxon.DateTime.fromISO(date, { zone: "America/New_York" });
        // Convert back to local time and to a Date object using Luxon's toJSDate() method
        return overrideZone.toJSDate();
      } else {
        return new Date(date);
      }
    },
    startCountDown() {
      return setInterval(() => {
        const secondsLeft = (this.countDownToThisTime - Date.now()) / 1000;
        if (secondsLeft < 0) {
          this.stopClock();
        }
        this.setView(secondsLeft);
      }, 1000);
    },
    setView(seconds) {
      const displayDays = this.countDownEl.querySelector(".tsw-countdown-days");
      const displayHours = this.countDownEl.querySelector(".tsw-countdown-hours");
      const displayMinutes = this.countDownEl.querySelector(".tsw-countdown-minutes");
      const displaySeconds = this.countDownEl.querySelector(".tsw-countdown-seconds");
      const statusAlert = this.countDownEl.querySelector(".tsw-countdown-status-alert");
      const a11yAlert = this.countDownEl.querySelector("#tsw-countdown-a11y-alert");
      const secs = Math.floor(seconds % 60);
      const mins = Math.floor((seconds / 60) % 60);
      const hrs = Math.floor((seconds / (60 * 60)) % 24);
      const dys = Math.floor(seconds / (60 * 60 * 24));
      displaySeconds.textContent = secs > 0 ? (secs < 10 ? "0" + secs : secs) : "00";
      displayMinutes.textContent = mins > 0 ? (mins < 10 ? "0" + mins : mins) : "00";
      displayHours.textContent = hrs > 0 ? (hrs < 10 ? "0" + hrs : hrs) : "00";
      displayDays.textContent = dys > 0 ? (dys < 10 ? "0" + dys : dys) : "00";
      if (secs % this.a11yAlertInterval !== 0) {
        a11yAlert.textContent = "Less than 24 hours to go!!!";
      } else {
        a11yAlert.textContent = "";
      }
      if (dys < this.urgencyInterval) {
        statusAlert.textContent = "Less than 24 hours to go!!!";
      } else {
        statusAlert.textContent = "";
      }
    },
    stopClock() {
      clearInterval(this.countDown);
      this.countDownToThisTime = null;
    },
  };

  window.addEventListener("load", () => {
    const targetDate = "2025-10-31T13:33";
    CountDownClock.init(targetDate, "local", 1, 30);
  });
</script>
