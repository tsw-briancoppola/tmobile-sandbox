<!-------  Savings Calculator -- Main Tool and Card Styling ------->

<style>
  .tsw-main {
    /* Set up primary text */
    --tsw-font-display: "TeleNeo Web", var(--phx--text-family-brand), -apple-system, BlinkMacSystemFont, "Segoe UI",
      Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
    --tsw-font-main: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif,
      "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";

    /* Set up color palette */
    --tsw-color-black-000: #000000;
    --tsw-color-black-100: #101010;
    --tsw-color-black-200: #202020;
    --tsw-color-black-300: #303030;
    --tsw-color-black-400: #404040;
    --tsw-color-black-500: #505050;
    --tsw-color-black-600: #606060;
    --tsw-color-black-700: #707070;
    --tsw-color-black-800: #808080;
    --tsw-color-black-900: #909090;
    /**/
    --tsw-color-white-000: #ffffff;
    --tsw-color-white-100: #f8f8f8;
    --tsw-color-white-200: #e8e8e8;
    --tsw-color-white-300: #d8d8d8;
    --tsw-color-white-400: #c8c8c8;
    --tsw-color-white-500: #b8b8b8;
    --tsw-color-white-600: #a8a8a8;
    /**/
    --tsw-color-brand-300: #e65ba2;
    --tsw-color-brand-500: #e20074;
    --tsw-color-brand-700: #a10053;

    --tsw-color-brand-gradient: linear-gradient(
      0deg,
      var(--tsw-color-brand-300) 0%,
      var(--tsw-color-brand-500) 10%,
      var(--tsw-color-brand-700) 90%
    );
    /**/
    --tsw-color-red-300: #ce1c11;
    --tsw-color-red-500: #c11a10;
    --tsw-color-red-700: #81110b;
    /**/
    --tsw-color-green-300: #1cce13;
    --tsw-color-green-500: #17a710;
    --tsw-color-green-700: #11810c;

    /* Set up grid spacing */
    --tsw-spacing-grid: 1rem;

    /* Set border radius */
    --tsw-border-radius: 1rem;

    /* Box shadows */
    --tsw-box-shadow-100: 0px 1.59445px 2.71056px rgba(0, 0, 0, 0.0168519);
    --tsw-box-shadow-200: 0px 7.01556px 5.61245px rgba(0, 0, 0, 0.0274815),
      0px 1.59445px 2.71056px rgba(0, 0, 0, 0.0168519);
    --tsw-box-shadow-300: 0px 17.22px 11.193px rgba(0, 0, 0, 0.035), 0px 7.01556px 5.61245px rgba(0, 0, 0, 0.0274815),
      0px 1.59445px 2.71056px rgba(0, 0, 0, 0.0168519);
    --tsw-box-shadow-400: 0px 33.1645px 21.9396px rgba(0, 0, 0, 0.0425185), 0px 17.22px 11.193px rgba(0, 0, 0, 0.035),
      0px 7.01556px 5.61245px rgba(0, 0, 0, 0.0274815), 0px 1.59445px 2.71056px rgba(0, 0, 0, 0.0168519);
    --tsw-box-shadow-500: 0px 55.8056px 40.3395px rgba(0, 0, 0, 0.0531481),
      0px 33.1645px 21.9396px rgba(0, 0, 0, 0.0425185), 0px 17.22px 11.193px rgba(0, 0, 0, 0.035),
      0px 7.01556px 5.61245px rgba(0, 0, 0, 0.0274815), 0px 1.59445px 2.71056px rgba(0, 0, 0, 0.0168519);
    --tsw-box-shadow-600: 0px 86.1px 68.88px rgba(0, 0, 0, 0.07), 0px 55.8056px 40.3395px rgba(0, 0, 0, 0.0531481),
      0px 33.1645px 21.9396px rgba(0, 0, 0, 0.0425185), 0px 17.22px 11.193px rgba(0, 0, 0, 0.035),
      0px 7.01556px 5.61245px rgba(0, 0, 0, 0.0274815), 0px 1.59445px 2.71056px rgba(0, 0, 0, 0.0168519);

    /* BHM Specific */
    --line-size: 3px;
    --line-size-2x: 6px;
    --line-size-10x: 30px;
  }

  .tsw-main {
    display: flex;
    width: 100%;
    gap: 16px;
    flex-direction: column;
    font-family: var(--tsw-font-display);
  }

  /* Redesigned Savings Calculator */

  .calc-card-list {
    display: grid;
    width: calc(100% - 2rem);
    max-width: 960px;
    margin-inline: auto;
    margin-bottom: 2rem;
    grid-template-columns: repeat(3, 1fr);
    gap: 1rem;
  }

  .calc-card-list .card {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    padding: 0.5rem;
    background: var(--tsw-color-white-000);
    border-radius: 0.5rem;
    box-shadow: 0rem 0rem 1rem 0rem rgba(0, 0, 0, 0.2);
  }

  .calc-card-list .card.tmo {
    padding: 0rem 0rem 0.5rem;
    background: var(--tsw-color-white-100);
  }

  .calc-card-list .card .card-head {
    padding: 1rem;
    background: linear-gradient(var(--tsw-color-black-000), var(--tsw-color-black-400));
    color: var(--tsw-color-white-000);
    border-radius: 0.5rem;
    margin-bottom: 0.5rem;
  }

  .calc-card-list .card.tmo .card-head {
    padding: 1.5rem;
    margin-bottom: 0rem;
    background: var(--tsw-color-brand-gradient);
  }

  .calc-card-list .card .card-head .content {
    display: flex;
    align-items: center;
    justify-content: flex-start;
  }

  .calc-card-list .card.tmo .card-head .content {
    display: grid;
    justify-content: space-between;
    gap: 1rem;
  }

  .calc-card-list .card .card-head .plan {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    justify-content: center;
  }

  .calc-card-list .card .card-head h3 {
    font-size: 2.5rem;
    font-weight: 800;
    line-height: 1.2em;
    margin-inline-start: 0rem;
    margin-block-start: 0rem;
    margin-inline-end: 0rem;
    margin-block-end: 0rem;
  }

  .calc-card-list .card .card-head .plan span {
    font-family: var(--tsw-font-main);
    font-size: 1.4rem;
    font-weight: 500;
    line-height: 1.2em;
  }

  .calc-card-list .card .price-ind::before {
    content: "$";
    height: 100%;
    align-self: start;
    top: 3px;
    font-size: 1.25rem;
    position: relative;
  }

  .calc-card-list .card .card-head .details {
    line-height: 1em;
  }

  .calc-card-list .card .card-head span {
    font-weight: 800;
    font-size: 1.2rem;
    white-space: break-spaces; /* keep text 15 characters or less. Else break on spaces. */
  }

  .calc-card-list .card .card-head .details span::before {
    content: "\2605";
    margin-inline: 0.25rem;
  }

  .calc-card-list .card .card-desc,
  .calc-card-list .card .card-total {
    display: flex;
    gap: 3.25rem;
    padding: 1rem;
    background: var(--tsw-color-white-100);
    border-radius: 0.5rem;
  }

  .calc-card-list .card .card-desc {
    flex-direction: column;
  }

  .calc-card-list .card .card-total,
  .calc-card-list .card .card-desc .line-item {
    align-items: center;
  }

  .calc-card-list .card.tmo .card-desc,
  .calc-card-list .card.tmo .card-total {
    height: 100%;
    margin-inline: 0.5rem;
    background: var(--tsw-color-white-000);
  }

  .calc-card-list .card .card-desc .line-item,
  .calc-card-list .card .card-total {
    height: 100%;
    position: relative;
    gap: 1rem;
    display: flex;
    justify-content: space-between;
  }

  .calc-card-list .card .card-desc .line-item .tsw-ben-legal {
    font-size: 1rem;
    line-height: 1.1em;
    color: var(--tsw-color-black-500);
    text-align: right;
    position: absolute;
    right: 0;
    max-width: 150px;
  }

  .calc-card-list .card .card-desc .line-item .line-desc,
  .calc-card-list .card .card-total .line-desc {
    font-family: var(--tsw-font-main);
    font-size: 1.2rem;
    font-weight: 500;
    padding-right: 1.5rem;
  }

  .calc-card-list .card .line-desc button {
    font-family: var(--tsw-font-main);
    font-size: 1.2rem;
    font-weight: 500;
    background: none;
    border: none;
    padding: 0;
    cursor: pointer;
    text-decoration: underline;
  }

  .calc-card-list .card .card-total span.est-total-hl {
    font-weight: 700;
  }

  .calc-card-list .card .card-desc .line-item .line-price,
  .calc-card-list .card .card-total .line-price {
    display: flex;
    font-size: 2.25rem;
    font-weight: 800;
  }

  .calc-card-list .card.tmo .card-desc .line-item .line-price,
  .calc-card-list .card.tmo .card-total .line-price {
    color: var(--tsw-color-brand-500);
  }

  .calc-card-list .card .card-desc .line-item .line-price.monthly::after,
  .calc-card-list .card .card-total .line-price.monthly::after {
    content: "/mo.";
    align-self: center;
    font-size: 1.25rem;
    top: 3px;
    position: relative;
  }

  .calc-card-list .card .card-total {
    padding-bottom: 3rem;
  }

  .calc-card-list .card .total-section {
    display: flex;
    flex-direction: column;
    gap: 0.25rem;
    align-items: flex-end;
    text-align: right;
    width: 100%;
    max-width: 150px;
  }

  .calc-card-list .card .savings-banner {
    font-size: 1.5rem;
    line-height: 1.2em;
    font-weight: 900;
    text-align: center;
    color: var(--tsw-color-brand-500);
    padding: 0.5rem;
    position: absolute;
    right: 50%;
    bottom: 0;
    transform: translateX(50%);
    width: 100%;
  }

  .calc-card-list .card.tmo .savings-banner span {
    display: none;
  }

  .calc-card-list .card.tmo .savings-banner span.active {
    display: flex;
  }

  /* Segment Selection */

  .tsw-savings-calc .segment-selector {
    display: flex;
    justify-content: center;
    width: 100%;
    gap: 1rem;
    margin: 2rem auto;
  }

  .tsw-savings-calc .segment-selector button {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0.8rem 1.6rem;
    border: 2px solid var(--tsw-color-black-000);
    border-radius: 10rem;
    background: transparent;
    color: var(--tsw-color-black-000);
    font-family: var(--tsw-font-main);
    font-weight: 600;
    cursor: pointer;
    transition: 0.25s;
  }

  .tsw-savings-calc .segment-selector button:hover {
    opacity: 0.75;
    transition: 0.25s;
  }

  .tsw-savings-calc .segment-selector button.active {
    border: 2px solid transparent;
    color: var(--tsw-color-white-000);
    background: var(--tsw-color-black-000);
    transition: 0.25s;
  }

  .tsw-savings-calc .segment-selector button:disabled {
    border: 2px solid var(--tsw-color-white-400);
    color: var(--tsw-color-white-400);
    cursor: not-allowed;
  }

  /* Input for plan selection */
  .tsw-sd-selection[tsw-type="compplan"] {
    display: none;
  }

  .tsw-sd-selection .tsw-select {
    min-width: 300px;
    margin: 0px 5px;
    position: relative;
    outline: none;
    transition: 0.25s;
    -moz-transition: 0.25s;
    -webkit-transition: 0.25s;
  }

  .tsw-sd-selection select {
    width: 100%;
    height: 100%;
    padding: 28px 13px 10px !important;
    appearance: none;
    -webkit-appearance: none;
    border: none;
    border: 2px solid var(--tsw-color-black-000);
    border-radius: 0.5rem;
    -moz-border-radius: 0.5rem;
    -webkit-border-radius: 0.5rem;
    font-family: var(--tsw-font-display);
    color: var(--tsw-color-black-000);
    font-size: 1.5rem;
    font-weight: 700;
    cursor: pointer;
  }

  .tsw-sd-selection select option {
    position: absolute;
    bottom: 0;
    background-color: var(--tsw-color-white-000);
    color: var(--tsw-color-black-000);
    border: 1px solid var(--tsw-color-black-000);
  }

  .tsw-sd-selection label {
    position: absolute;
    left: 15px;
    top: 50%;
    transform: translateY(-50%);
    transition: 0.25s;
    -moz-transition: 0.25s;
    -webkit-transition: 0.25s;
    font-family: var(--tsw-font-display);
    font-weight: 600;
  }

  .tsw-sd-selection .tsw-select:focus-within select {
    border: 1px solid var(--tsw-color-brand-500);
    box-shadow: 0px 0px 5px 0px rgba(226, 0, 116, 0.5);
    transition: 0.25s;
    -moz-transition: 0.25s;
    -webkit-transition: 0.25s;
  }

  .tsw-sd-selection select.active {
    border: 2px solid var(--tsw-color-brand-500);
    transition: 0.25s;
    -moz-transition: 0.25s;
    -webkit-transition: 0.25s;
  }

  /* .tsw-sd-selection select:focus ~ label, */
  .tsw-sd-selection select.active ~ label {
    top: 30%;
    font-size: 12px;
    transition: 0.25s;
    -moz-transition: 0.25s;
    -webkit-transition: 0.25s;
  }

  /* Caret for dropdowns */
  .tsw-sd-selection .tsw-select .tsw-caret {
    width: 24px;
    height: 15px;
    content: url("https://t-mobile.com/content/dam/t-mobile/ntm/branding/icons/iconography/acc-chevron-2x.png");
    transform: rotate(180deg) scale(0.5) translateY(45%);
    position: absolute;
    top: 45%;
    right: 15px;
    filter: grayscale(0%) invert(100%) brightness(0%);
    transition: 0.25s;
    -webkit-transition: 0.25s;
    -moz-transition: 0.25s;
  }

  /* Stepper for line selections */

  .device-selector {
    display: flex;
    gap: 32px;
    margin: 3rem 0rem;
    justify-content: center;
    align-items: center;
    transition: 0.25s;
  }

  .device-selector .device {
    display: flex;
    flex-direction: column;
    align-items: center;
    font-family: var(--tsw-font-display);
    font-weight: 600;
    font-size: 16px;
    gap: 8px;
  }

  .device-selector .device label {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 4px;
  }

  .device-selector .device label img {
    width: 25px;
    margin: 16px 0px;
  }

  .device-selector .device .stepper {
    display: flex;
    margin: 4px 0px;
  }

  .device-selector .device .stepper input {
    width: 4rem;
    height: 4rem;
    border: 2px solid var(--tsw-color-brand-500);
    border-radius: 4px;
    display: flex;
    justify-content: center;
    align-items: center;
    text-align: center;
    margin-inline: auto;
    font-family: var(--tsw-font-display);
    font-weight: 700;
    font-size: 1.5rem;
    background: transparent;
    -moz-appearance: textfield;
  }

  .device-selector .device .stepper input::-webkit-outer-spin-button,
  .device-selector .device .stepper input::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  .device-selector .device .stepper button {
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--tsw-color-brand-500);
    width: 4.5rem;
    height: 4.5rem;
    margin-inline: 1rem;
    font-size: 2.5rem;
    font-weight: 700;
    border: none;
    border-radius: 4px;
    color: var(--tsw-color-white-000);
    transition: 0.25s;
    -moz-transition: 0.25s;
    -webkit-transition: 0.25s;
  }

  .device-selector .device .stepper button[active="false"] {
    background: var(--tsw-color-black-500);
    transition: 0.25s;
    -moz-transition: 0.25s;
    -webkit-transition: 0.25s;
  }

  .device-selector .device .stepper button:hover {
    background: var(--tsw-color-brand-700);
    cursor: pointer;
    transition: 0.25s;
    -moz-transition: 0.25s;
    -webkit-transition: 0.25s;
  }

  .device-selector .device .stepper button[active="false"]:hover {
    background: var(--tsw-color-black-500);
    cursor: initial;
    transition: 0.25s;
    -moz-transition: 0.25s;
    -webkit-transition: 0.25s;
  }

  /* Notification Banners */
  .tsw-notification {
    display: none;
    gap: 1rem;
    width: calc(100% - 4rem);
    max-width: 600px;
    background: var(--tsw-color-white-000);
    padding: 2rem;
    margin-inline: auto;
    margin-bottom: 4rem;
    border-radius: 0.5rem;
    box-shadow: 0rem 0rem 1rem 0rem rgba(0, 0, 0, 0.15);
  }

  .tsw-notification.active {
    display: flex;
  }

  .tsw-notification svg {
    width: 20px;
    height: 20px;
    position: relative;
    top: 2px;
    flex-shrink: 0;
  }

  .tsw-notification span {
    font-size: 1.6rem;
    line-height: 1.5em;
    font-weight: 600;
  }

  .tsw-notification p {
    font-size: 1.4rem;
    line-height: 1.5em;
    font-weight: 500;
    margin-block-start: 0.5rem;
    margin-block-end: 1rem;
  }

  .tsw-notification a {
    display: none;
    font-weight: 600;
    text-decoration: none;
    color: var(--tsw-color-black-000);
    transition: 0.25s;
  }

  .tsw-notification a:hover {
    opacity: 0.5;
    transition: 0.25s;
  }

  .tsw-notification a::after {
    display: inline-block;
    content: url("https://t-mobile.com/content/dam/t-mobile/ntm/branding/icons/iconography/acc-chevron-2x.png");
    transform: rotate(90deg) scale(0.5);
    filter: grayscale(0%) invert(100%) brightness(0%);
    position: relative;
    left: 0px;
    transition: 0.25s;
  }

  .tsw-notification a:hover::after {
    left: 5px;
    transition: 0.25s;
  }

  .tsw-notification svg {
    display: none;
  }

  .tsw-notification.caution svg {
    display: block;
  }

  .tsw-notification.caution a {
    display: inline;
  }

  @media screen and (max-width: 899px) {
    .tsw-sd-selection[tsw-type="compplan"] {
      display: block;
    }

    .tsw-sd-selection .tsw-select {
      min-width: 0;
    }

    .tsw-savings-calc .segment-selector {
      overflow-x: scroll;
      justify-content: flex-start;
      width: fit-content;
    }

    .tsw-savings-calc .segment-selector button {
      flex-shrink: 0;
    }

    .plan-selectors {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
      width: 100%;
    }

    .device-selector {
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .calc-card-list {
      width: 100%;
      grid-template-columns: 1fr 1fr;
      gap: 0rem;
    }

    .calc-card-list .card,
    .calc-card-list .card.tmo {
      padding: 0rem;
      box-shadow: none;
      background: none;
      position: relative;
      gap: 0rem;
    }

    .calc-card-list .card .card-head,
    .calc-card-list .card.tmo .card-head {
      padding: 1rem;
      margin-bottom: 0;
      position: sticky;
      top: 69px;
      z-index: 100;
      border-radius: 0rem 0.5rem 0.5rem 0rem;
    }

    .calc-card-list .card.tmo .card-head .content {
      grid-template-columns: 1fr;
    }
    .calc-card-list .card .card-head .content {
      justify-content: center;
    }

    .calc-card-list .card .card-head .plan {
      align-items: center;
      text-align: center;
    }

    .calc-card-list .card.tmo .card-head {
      border-right: 2px solid var(--tsw-color-white-000);
      border-radius: 0.5rem 0rem 0rem 0.5rem;
    }

    .calc-card-list .card .card-desc .line-item,
    .calc-card-list .card .card-total {
      flex-direction: column;
      justify-content: center;
      border-bottom: none;
    }

    .calc-card-list .card .card-desc .line-item {
      border-bottom: 1px solid var(--tsw-color-white-200);
      background: var(--tsw-color-white-100);
    }

    .calc-card-list .card .card-desc .line-item:last-child {
      border-bottom: none;
      padding-bottom: 1rem;
    }

    .calc-card-list .card.tmo .card-desc {
      background: none;
      margin-inline: 0;
    }

    .calc-card-list .card .card-total {
      background: var(--tsw-color-white-100);
      border-radius: 0rem 0.5rem 0.5rem 0rem;
    }

    .calc-card-list .card.tmo .card-total {
      border-radius: 0.5rem 0rem 0rem 0.5rem;
      margin-inline: 0;
      z-index: 50;
    }

    .calc-card-list .card.tmo .card-total,
    .calc-card-list .card .card-total {
      box-shadow: 0rem 0rem 1rem 0rem rgba(0, 0, 0, 0.2);
      justify-content: flex-start;
    }

    .calc-card-list .card.tmo .card-desc .line-item {
      background: none;
      border-right: 1px solid var(--tsw-color-white-300);
      background: var(--tsw-color-white-000);
    }

    .calc-card-list .card .card-desc,
    .calc-card-list .card .card-total {
      background: none;
      padding: 0rem;
    }

    .calc-card-list .card .card-desc,
    .calc-card-list .card .card-total {
      gap: 0rem;
      background: var(--tsw-color-white-100);
    }

    .calc-card-list .card .card-desc .line-item .line-desc,
    .calc-card-list .card .card-total .line-desc {
      opacity: 0;
      font-size: 1.4rem;
      font-weight: 700;
      padding: 0.6rem 0rem;
    }

    .calc-card-list .card .card-total {
      padding-bottom: 0rem;
    }

    .calc-card-list .card .card-desc .line-item .price-wrapper {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-end;
    }

    .calc-card-list .card .card-desc .line-item .tsw-ben-legal {
      right: initial;
      text-align: center;
      bottom: 1rem;
    }

    .calc-card-list .card.tmo .card-desc .line-item .line-desc,
    .calc-card-list .card.tmo .card-total .line-desc {
      width: 200%;
      opacity: 1;
      position: relative;
      left: 50%;
      text-align: center;
      background: var(--tsw-color-white-000);
      margin-inline: 0;
      padding-right: 0;
      z-index: 50;
    }

    .calc-card-list .card.tmo .card-total .line-desc {
      background: var(--tsw-color-white-300);
      border-radius: 0.5rem 0.5rem 0rem 0rem;
    }

    .calc-card-list .card .total-section {
      text-align: center;
      align-items: center;
      max-width: none;
      padding: 1rem;
      width: calc(100% - 2rem);
    }

    .calc-card-list .card .savings-banner {
      position: initial;
      right: 0%;
      transform: translateX(0%);
    }

    .calc-card-list .card[tsw-selected="true"] {
      display: flex;
    }

    .calc-card-list .card[tsw-selected="false"] {
      display: none;
    }

    .calc-card-list .card .line-item[tsw-type="netflix"],
    .calc-card-list .card .line-item[tsw-type="hulu"],
    .calc-card-list .card .line-item[tsw-type="inflight"],
    .calc-card-list .card .line-item[tsw-type="satellite"] {
      padding-bottom: 3rem;
    }
    .calc-card-list .card .line-item[tsw-type="appletv"] {
      padding-bottom: 2rem;
    }
  }

  @media screen and (max-width: 450px) {
    .plan-selectors {
      grid-template-columns: 1fr;
    }
  }

  @media screen and (max-width: 440px) {
    .calc-card-list .card .savings-banner {
      min-height: 3rem;
    }
  }

  @media screen and (max-width: 430px) {
    .calc-card-list .card .card-head .plan span {
      font-size: 1.2rem;
    }
  }

  @media screen and (max-width: 375px) {
    .calc-card-list .card .card-head h3 {
      font-size: 2rem;
    }
    .calc-card-list .card .card-head .plan span {
      font-size: 1rem;
    }
  }
</style>

<!------- Savings Calc -- Value Table Styling ------->

<style>
  .tsw-main {
    /* Set up primary text */
    --tsw-font-display: "TeleNeo Web", var(--phx--text-family-brand), -apple-system, BlinkMacSystemFont, "Segoe UI",
      Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
    --tsw-font-main: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif,
      "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";

    /* Set up color palette */
    --tsw-color-black-000: #000000;
    --tsw-color-black-100: #101010;
    --tsw-color-black-200: #202020;
    --tsw-color-black-300: #303030;
    --tsw-color-black-400: #404040;
    --tsw-color-black-500: #505050;
    --tsw-color-black-600: #606060;
    --tsw-color-black-700: #707070;
    --tsw-color-black-800: #808080;
    --tsw-color-black-900: #909090;
    /**/
    --tsw-color-white-000: #ffffff;
    --tsw-color-white-100: #f8f8f8;
    --tsw-color-white-200: #e8e8e8;
    --tsw-color-white-300: #d8d8d8;
    --tsw-color-white-400: #c8c8c8;
    --tsw-color-white-500: #b8b8b8;
    --tsw-color-white-600: #a8a8a8;
    /**/
    --tsw-color-brand-300: #e65ba2;
    --tsw-color-brand-500: #e20074;
    --tsw-color-brand-700: #a10053;

    --tsw-color-brand-gradient: linear-gradient(
      0deg,
      var(--tsw-color-brand-300) 0%,
      var(--tsw-color-brand-500) 10%,
      var(--tsw-color-brand-700) 90%
    );
    /**/
    --tsw-color-red-300: #ce1c11;
    --tsw-color-red-500: #c11a10;
    --tsw-color-red-700: #81110b;
    /**/
    --tsw-color-green-300: #1cce13;
    --tsw-color-green-500: #17a710;
    --tsw-color-green-700: #11810c;

    /* Set up grid spacing */
    --tsw-spacing-grid: 1rem;

    /* Set border radius */
    --tsw-border-radius: 1rem;

    /* Box shadows */
    --tsw-box-shadow-100: 0px 1.59445px 2.71056px rgba(0, 0, 0, 0.0168519);
    --tsw-box-shadow-200: 0px 7.01556px 5.61245px rgba(0, 0, 0, 0.0274815),
      0px 1.59445px 2.71056px rgba(0, 0, 0, 0.0168519);
    --tsw-box-shadow-300: 0px 17.22px 11.193px rgba(0, 0, 0, 0.035), 0px 7.01556px 5.61245px rgba(0, 0, 0, 0.0274815),
      0px 1.59445px 2.71056px rgba(0, 0, 0, 0.0168519);
    --tsw-box-shadow-400: 0px 33.1645px 21.9396px rgba(0, 0, 0, 0.0425185), 0px 17.22px 11.193px rgba(0, 0, 0, 0.035),
      0px 7.01556px 5.61245px rgba(0, 0, 0, 0.0274815), 0px 1.59445px 2.71056px rgba(0, 0, 0, 0.0168519);
    --tsw-box-shadow-500: 0px 55.8056px 40.3395px rgba(0, 0, 0, 0.0531481),
      0px 33.1645px 21.9396px rgba(0, 0, 0, 0.0425185), 0px 17.22px 11.193px rgba(0, 0, 0, 0.035),
      0px 7.01556px 5.61245px rgba(0, 0, 0, 0.0274815), 0px 1.59445px 2.71056px rgba(0, 0, 0, 0.0168519);
    --tsw-box-shadow-600: 0px 86.1px 68.88px rgba(0, 0, 0, 0.07), 0px 55.8056px 40.3395px rgba(0, 0, 0, 0.0531481),
      0px 33.1645px 21.9396px rgba(0, 0, 0, 0.0425185), 0px 17.22px 11.193px rgba(0, 0, 0, 0.035),
      0px 7.01556px 5.61245px rgba(0, 0, 0, 0.0274815), 0px 1.59445px 2.71056px rgba(0, 0, 0, 0.0168519);

    /* BHM Specific */
    --line-size: 3px;
    --line-size-2x: 6px;
    --line-size-10x: 30px;
  }

  .tsw-main {
    display: flex;
    width: 100%;
    gap: 16px;
    flex-direction: column;
    font-family: var(--tsw-font-display);
  }

  .tsw-value-table {
    width: calc(100% - 4rem);
    max-width: 1080px;
    margin-inline: auto;
    border-radius: 1rem;
    background: var(--tsw-color-brand-500);
    padding: 2rem;
  }

  .tsw-value-table .vt-header {
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 0rem 0rem 2rem;
    color: var(--tsw-color-white-000);
  }

  .tsw-value-table h3 {
    margin-block-start: 0;
    margin-block-end: 0;
    font-family: var(--tsw-font-display);
    font-size: 3rem;
    line-height: 1.2em;
    font-weight: 900;
  }

  .tsw-value-table .vt-benefits {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 4rem;
    padding: 2rem;
    border-radius: 1rem;
    background: var(--tsw-color-white-000);
  }

  .tsw-value-table .vt-benefits ul {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    margin-block-start: 0;
    margin-block-end: 0;
    padding-inline-start: 0;
    list-style: none;
  }

  .tsw-value-table .vt-benefits ul li {
    display: flex;
    gap: 1.5rem;
    align-items: center;
    justify-content: space-between;
  }

  .tsw-value-table .vt-section {
    display: flex;
    flex-direction: column;
    gap: 2rem;
  }

  .tsw-value-table .vt-section .section-title {
    font-size: 1.2rem;
    font-weight: 600;
    color: var(--tsw-color-black-700);
    text-transform: uppercase;
  }

  .tsw-value-table .vt-section .vt-title {
    display: flex;
    align-items: center;
    gap: 0.8rem;
  }

  .tsw-value-table .vt-section .vt-title img.satellite {
    height: 3.6rem;
  }

  .tsw-value-table .vt-benefits ul li .desc {
    width: 100%;
    font-size: 1.4rem;
    line-height: 1.4em;
    font-weight: 600;
  }

  .tsw-value-table .vt-benefits ul li .price {
    width: 100%;
    max-width: 8rem;
    font-weight: 800;
    font-size: 1.4rem;
    line-height: 1.1em;
    text-align: right;
  }

  @media screen and (max-width: 800px) {
    .tsw-value-table .vt-benefits {
      grid-template-columns: 1fr;
      gap: 4rem;
    }
  }

  @media screen and (max-width: 639px) {
    .tsw-value-table h3 {
      font-size: 2.4rem;
    }
  }
</style>

<!------- Savings Calculator Piece ------->

<div class="tsw-main">
  <!-- Selectors and Filtering -->
  <div class="tsw-savings-calc">
    <div class="segment-selector">
      <button class="active" tsw-value="standard">Standard plans</button>
      <button tsw-value="fiftyfive">Age 55+</button>
      <button tsw-value="military">Military</button>
      <button tsw-value="firstrespond">First Responder</button>
    </div>

    <div class="device-selector">
      <div class="plan-selectors">
        <div class="tsw-sd-selection" tsw-type="tmoplan">
          <div class="tsw-select">
            <select id="tmoplan" name="tmoplan" class="active"></select>
            <label aria-hidden="true" id="planLabel" for="plan">Select a T-Mobile plan</label>
            <span aria-hidden="true" class="tsw-caret"></span>
          </div>
        </div>

        <div class="tsw-sd-selection" tsw-type="compplan">
          <div class="tsw-select">
            <select id="compplan" name="compplan" class="active"></select>
            <label aria-hidden="true" id="planLabel" for="plan">Select a carrier to compare</label>
            <span aria-hidden="true" class="tsw-caret"></span>
          </div>
        </div>
      </div>

      <div class="device">
        <div class="stepper">
          <button step-down>-</button>
          <input tsw-for="phone" type="number" min="1" value="3" max="6" readonly />
          <button step-up>+</button>
        </div>
      </div>
    </div>

    <div class="tsw-notification">
      <svg viewBox="0 0 1 1" data-size="md" focusable="false" aria-hidden="true">
        <use
          href="/etc.clientlibs/digx/experience/clientlibs/clientlib-experience-main/resources/sprite/icons.svg?v4.11#exclamation-filled"
        ></use>
      </svg>

      <div class="content">
        <span>Notification Headline</span>
        <p>
          Notification text is moderately long. Notification text is moderately long. Notification text is moderately
          long.
        </p>

        <a href="tel:+18008662453">Call 1-800-T-MOBILE</a>
      </div>
    </div>

    <!-- Savings Calc Cards -->
    <div class="calc-card-list"></div>
  </div>

  <!------- Value Table ------->

  <div class="tsw-main">
    <div class="tsw-value-table">
      <div class="vt-header">
        <h3>Check out all the value included with our <span class="plan-title"></span> plan.</h3>
      </div>

      <div class="vt-benefits">
        <div class="vt-section" tsw-type="streaming">
          <span class="section-title">Streaming benefits</span>
          <ul></ul>
        </div>
        <div class="vt-section" tsw-type="plan">
          <span class="section-title">Plan benefits</span>
          <ul></ul>
        </div>
        <div class="vt-section" tsw-type="perks">
          <span class="section-title">Plus additional perks</span>
          <ul></ul>
        </div>
      </div>
    </div>
  </div>

  <!------- Scripting for the whole experience ------->

  <script>
    const savingsData = {
      benefitList: [
        { id: "netflix", active: ["ebeyond", "emore", "esave"], copy: "Netflix" },
        { id: "appletv", active: ["ebeyond", "emore", "esave"], copy: "Apple TV" },
        { id: "hulu", active: ["ebeyond", "esave"], copy: "Hulu" },
        { id: "satellite", active: ["ebeyond", "esave"], copy: "T-Satellite" },
        { id: "pricelock", active: ["ebeyond", "emore", "esave"], copy: "Price Guarantee" },
      ],
      tmobileData: {
        id: "tmo",
        name: "T-Mobile",
        plans: [
          {
            id: "esave",
            planName: "Better Value",
            tagline: "Our most value-packed plan",
            selected: false,
            pricePoints: {
              id: "pricing",
              promo: true,
              segments: [{ id: "standard", maxlines: 6, minlines: 3, amounts: [0, 0, 140, 170, 200, 230] }],
            },
            benefits: [
              {
                id: "netflix",
                type: "streaming",
                value: "$7.99/mo.",
                logo: "/content/dam/digx/tmobile/us/en/branding/logos/external/netflix1.svg",
                icon: "/content/dam/digx/tmobile/us/en/branding/logos/external/sc-checkmark.svg",
                valuetable: true,
                amounts: [0, 0, 0, 0, 0, 0],
              },
              {
                id: "appletv",
                type: "streaming",
                value: "$9.99/mo.",
                logo: "/content/dam/digx/tmobile/us/en/branding/logos/external/apple-tv-updated.svg",
                icon: "/content/dam/digx/tmobile/us/en/branding/logos/external/sc-checkmark.svg",
                valuetable: true,
                amounts: [3, 3, 3, 3, 3, 3],
              },
              {
                id: "hulu",
                type: "streaming",
                value: "$11.99/mo.",
                logo: "/content/dam/digx/tmobile/us/en/branding/logos/external/hulu.svg",
                icon: "/content/dam/digx/tmobile/us/en/branding/logos/external/sc-checkmark.svg",
                valuetable: true,
                amounts: [0, 0, 0, 0, 0, 0],
              },
              {
                id: "satellite",
                type: "plan",
                value: "$10/mo. per line",
                logo: "/content/dam/digx/tmobile/us/en/branding/logos/external/t-sat-logo.svg",
                icon: "/content/dam/digx/tmobile/us/en/branding/logos/external/sc-checkmark.svg",
                valuetable: true,
                amounts: [0, 0, 0, 0, 0, 0],
              },
              { id: "pricelock", included: true, text: "5 Years", valuetable: false },
            ],
            additional_value: [
              {
                id: "hotspot",
                type: "plan",
                value: "$25/mo. per line",
                icon: "/content/dam/digx/tmobile/us/en/branding/logos/external/sc-checkmark.svg",
                valuetable: true,
                copy: "Unlimited high-speed mobile hotspot data (domestic)",
              },
              {
                id: "canmex",
                type: "plan",
                value: "$50/mo. per line",
                icon: "/content/dam/digx/tmobile/us/en/branding/logos/external/sc-checkmark.svg",
                valuetable: true,
                copy: "30GB high-speed data in Canada & Mexico",
              },
              {
                id: "int-data",
                type: "plan",
                value: "$100/mo. per line",
                icon: "/content/dam/digx/tmobile/us/en/branding/logos/external/sc-checkmark.svg",
                valuetable: true,
                copy: "30GB high-speed international data",
              },
              {
                id: "scamshield",
                type: "plan",
                value: "$4/mo. per line",
                icon: "/content/dam/digx/tmobile/us/en/branding/logos/external/scamshield-icon.svg",
                valuetable: true,
                copy: "ScamShield&trade; Premium",
              },
              // {
              //   id: "thirdline",
              //   type: "plan",
              //   value: "$xx/mo.",
              //   icon: "/content/dam/digx/tmobile/us/en/branding/logos/external/sc-checkmark.svg",
              //   valuetable: true,
              //   copy: "Third line FREE included",
              // },
              {
                id: "upgrade",
                type: "perks",
                icon: "/content/dam/digx/tmobile/us/en/branding/logos/external/sc-smartphone.svg",
                valuetable: true,
                copy: "Option to upgrade your phone every two years",
              },
              {
                id: "deals",
                type: "perks",
                icon: "/content/dam/digx/tmobile/us/en/branding/logos/external/sc-smartphone.svg",
                valuetable: true,
                copy: "New T-Mobile customers and existing customers get the same great phone deals every two years",
              },
            ],
          },
          {
            id: "ebeyond",
            planName: "Experience Beyond",
            tagline: "Our most value-packed plan",
            selected: false,
            pricePoints: {
              id: "pricing",
              promo: true,
              segments: [
                { id: "standard", maxlines: 6, amounts: [100, 170, 170, 215, 260, 305] },
                { id: "fiftyfive", maxlines: 2, copy: "w/ 55+ Savings", amounts: [85, 130] },
                { id: "military", maxlines: 6, copy: "w/ Military Savings", amounts: [85, 130, 165, 200, 235, 270] },
                {
                  id: "firstrespond",
                  maxlines: 6,
                  copy: "w/ First Responder Savings",
                  amounts: [85, 130, 165, 200, 235, 270],
                },
              ],
            },
            benefits: [
              {
                id: "netflix",
                type: "streaming",
                value: "$7.99/mo.",
                logo: "/content/dam/digx/tmobile/us/en/branding/logos/external/netflix1.svg",
                icon: "/content/dam/digx/tmobile/us/en/branding/logos/external/sc-checkmark.svg",
                valuetable: true,
                amounts: [0, 0, 0, 0, 0, 0],
              },
              {
                id: "appletv",
                type: "streaming",
                value: "$9.99/mo.",
                logo: "/content/dam/digx/tmobile/us/en/branding/logos/external/apple-tv-updated.svg",
                icon: "/content/dam/digx/tmobile/us/en/branding/logos/external/sc-checkmark.svg",
                valuetable: true,
                amounts: [3, 3, 3, 3, 3, 3],
              },
              {
                id: "hulu",
                type: "streaming",
                value: "$11.99/mo.",
                logo: "/content/dam/digx/tmobile/us/en/branding/logos/external/hulu.svg",
                icon: "/content/dam/digx/tmobile/us/en/branding/logos/external/sc-checkmark.svg",
                valuetable: true,
                amounts: [0, 0, 0, 0, 0, 0],
              },
              {
                id: "satellite",
                type: "plan",
                value: "$10/mo. per line",
                logo: "/content/dam/digx/tmobile/us/en/branding/logos/external/t-sat-logo.svg",
                icon: "/content/dam/digx/tmobile/us/en/branding/logos/external/sc-checkmark.svg",
                valuetable: true,
                amounts: [0, 0, 0, 0, 0, 0],
              },
              { id: "pricelock", included: true, text: "5 Years", valuetable: false },
            ],
            additional_value: [
              {
                id: "hotspot",
                type: "plan",
                value: "$25/mo. per line",
                icon: "/content/dam/digx/tmobile/us/en/branding/logos/external/sc-checkmark.svg",
                valuetable: true,
                copy: "Unlimited high-speed mobile hotspot data (domestic)",
              },
              {
                id: "canmex",
                type: "plan",
                value: "$50/mo. per line",
                icon: "/content/dam/digx/tmobile/us/en/branding/logos/external/sc-checkmark.svg",
                valuetable: true,
                copy: "30GB high-speed data in Canada & Mexico",
              },
              {
                id: "int-data",
                type: "plan",
                value: "$50/mo. per line",
                icon: "/content/dam/digx/tmobile/us/en/branding/logos/external/sc-checkmark.svg",
                valuetable: true,
                copy: "15GB high-speed international data",
              },
              {
                id: "scamshield",
                type: "plan",
                value: "$4/mo. per line",
                icon: "/content/dam/digx/tmobile/us/en/branding/logos/external/scamshield-icon.svg",
                valuetable: true,
                copy: "ScamShield&trade; Premium",
              },
              {
                id: "upgrade",
                type: "perks",
                icon: "/content/dam/digx/tmobile/us/en/branding/logos/external/sc-smartphone.svg",
                valuetable: true,
                copy: "Option to upgrade your phone every year",
              },
              {
                id: "deals",
                type: "perks",
                icon: "/content/dam/digx/tmobile/us/en/branding/logos/external/sc-smartphone.svg",
                valuetable: true,
                copy: "New T-Mobile customers and existing customers get the same great phone deals every year",
              },
            ],
          },
          {
            id: "emore",
            planName: "Experience More",
            tagline: "Our most popular plan",
            selected: true,
            pricePoints: {
              id: "pricing",
              promo: true,
              segments: [
                { id: "standard", maxlines: 6, amounts: [85, 140, 140, 170, 200, 230] },
                { id: "fiftyfive", maxlines: 2, copy: "w/ 55+ Savings", amounts: [70, 100] },
                { id: "military", maxlines: 6, copy: "w/ Military Savings", amounts: [70, 100, 120, 140, 160, 180] },
                {
                  id: "firstrespond",
                  maxlines: 6,
                  copy: "w/ First Responder Savings",
                  amounts: [70, 100, 120, 140, 160, 180],
                },
              ],
            },
            benefits: [
              {
                id: "netflix",
                type: "streaming",
                value: "$7.99/mo.",
                logo: "/content/dam/digx/tmobile/us/en/branding/logos/external/netflix1.svg",
                icon: "/content/dam/digx/tmobile/us/en/branding/logos/external/sc-checkmark.svg",
                valuetable: true,
                amounts: [0, 0, 0, 0, 0, 0],
              },
              {
                id: "appletv",
                type: "streaming",
                value: "$9.99/mo.",
                logo: "/content/dam/digx/tmobile/us/en/branding/logos/external/apple-tv-updated.svg",
                icon: "/content/dam/digx/tmobile/us/en/branding/logos/external/sc-checkmark.svg",
                valuetable: true,
                amounts: [3, 3, 3, 3, 3, 3],
              },
              { id: "pricelock", included: true, text: "5 Years", valuetable: false },
            ],
            additional_value: [
              {
                id: "hotspot",
                type: "plan",
                value: "$6/mo. per line",
                icon: "/content/dam/digx/tmobile/us/en/branding/logos/external/sc-checkmark.svg",
                valuetable: true,
                copy: "60GB high-speed mobile hotspot data (domestic)",
              },
              {
                id: "canmex",
                type: "plan",
                value: "$25/mo. per line",
                icon: "/content/dam/digx/tmobile/us/en/branding/logos/external/sc-checkmark.svg",
                valuetable: true,
                copy: "15GB high-speed data in Canada & Mexico",
              },
              {
                id: "int-data",
                type: "plan",
                value: "$35/mo. per line",
                icon: "/content/dam/digx/tmobile/us/en/branding/logos/external/sc-checkmark.svg",
                valuetable: true,
                copy: "5GB high-speed international data",
              },
              {
                id: "scamshield",
                type: "plan",
                value: "$4/mo. per line",
                icon: "/content/dam/digx/tmobile/us/en/branding/logos/external/scamshield-icon.svg",
                valuetable: true,
                copy: "ScamShield&trade; Premium",
              },
              {
                id: "upgrade",
                type: "perks",
                icon: "/content/dam/digx/tmobile/us/en/branding/logos/external/sc-smartphone.svg",
                valuetable: true,
                copy: "Option to upgrade your phone every two years",
              },
              {
                id: "deals",
                type: "perks",
                icon: "/content/dam/digx/tmobile/us/en/branding/logos/external/sc-smartphone.svg",
                valuetable: true,
                copy: "New T-Mobile customers and existing customers get the same great phone deals every two years",
              },
            ],
          },
          {
            id: "essentials",
            planName: "Essentials",
            tagline: "Our lowest price plan",
            selected: false,
            pricePoints: {
              id: "pricing",
              promo: true,
              segments: [
                { id: "standard", maxlines: 6, amounts: [60, 90, 90, 100, 120, 135] },
                { id: "fiftyfive", planName: "Essentials Choice 55", maxlines: 2, amounts: [45, 60] },
                { id: "military", maxlines: 6, copy: "w/ Military Savings", amounts: [45, 80, 90, 100, 110, 120] },
                {
                  id: "firstrespond",
                  maxlines: 6,
                  copy: "w/ First Responder Savings",
                  amounts: [45, 80, 90, 100, 110, 120],
                },
              ],
            },
            benefits: [],
            additional_value: [],
          },
          {
            id: "essentialssaver",
            planName: "Essentials Saver",
            tagline: "Our lowest price plan",
            selected: false,
            pricePoints: {
              id: "pricing",
              segments: [{ id: "standard", maxlines: 2, amounts: [50, 80] }],
            },
            benefits: [],
            additional_value: [],
          },
        ],
      },
      carrierList: [
        {
          id: "verizon",
          name: "Verizon",
          selected: true,
          setMobileSelect(newValue) {
            this.selected = newValue;
          },
          plans: [
            {
              id: "esave",
              planName: "Unlimited Ultimate",
              pricePoints: {
                id: "pricing",
                segments: [{ id: "standard", amounts: [90, 160, 195, 220, 275, 330] }],
              },
              benefits: [
                { id: "netflix", amounts: [10, 10, 10, 10, 10, 10], legal: "Optional Netflix & Max (With Ads) bundle" },
                { id: "appletv", amounts: [15, 15, 15, 15, 15, 15], legal: "Optional Apple One bundle" },
                {
                  id: "hulu",
                  amounts: [10, 10, 10, 10, 10, 10],
                  legal: "Optional Disney+, Hulu, ESPN+ (With Ads) bundle",
                },
                {
                  id: "satellite",
                  amounts: [10, 20, 30, 40, 50, 60],
                  legal: "Add T-Satellite—auto connects, powers your apps",
                },
                { id: "pricelock", included: true, text: "3 Years" },
              ],
            },
            {
              id: "ebeyond",
              planName: "Unlimited Ultimate",
              pricePoints: {
                id: "pricing",
                segments: [
                  { id: "standard", amounts: [90, 160, 195, 220, 275, 330] },
                  { id: "fiftyfive", copy: "&nbsp;", amounts: [90, 160] },
                  { id: "military", copy: "w/ Military Discount", amounts: [80, 135, 170, 200, 255, 310] },
                  { id: "firstrespond", copy: "w/ First Responder Discount", amounts: [80, 135, 170, 200, 255, 310] },
                ],
              },
              benefits: [
                { id: "netflix", amounts: [10, 10, 10, 10, 10, 10], legal: "Optional Netflix & Max (With Ads) bundle" },
                { id: "appletv", amounts: [15, 15, 15, 15, 15, 15], legal: "Optional Apple One bundle" },
                {
                  id: "hulu",
                  amounts: [10, 10, 10, 10, 10, 10],
                  legal: "Optional Disney+, Hulu, ESPN+ (With Ads) bundle",
                },
                {
                  id: "satellite",
                  amounts: [10, 20, 30, 40, 50, 60],
                  legal: "Add T-Satellite—auto connects, powers your apps",
                },
                { id: "pricelock", included: true, text: "3 Years" },
              ],
            },
            {
              id: "emore",
              planName: "Unlimited Ultimate",
              pricePoints: {
                id: "pricing",
                segments: [
                  { id: "standard", amounts: [90, 160, 195, 220, 275, 330] },
                  { id: "fiftyfive", copy: "&nbsp;", amounts: [90, 160] },
                  { id: "military", copy: "w/ Military Discount", amounts: [80, 135, 170, 200, 255, 310] },
                  { id: "firstrespond", copy: "w/ First Responder Discount", amounts: [80, 135, 170, 200, 255, 310] },
                ],
              },
              benefits: [
                { id: "netflix", amounts: [10, 10, 10, 10, 10, 10], legal: "Optional Netflix & Max (With Ads) bundle" },
                { id: "appletv", amounts: [15, 15, 15, 15, 15, 15], legal: "Optional Apple One bundle" },
                { id: "pricelock", included: true, text: "3 Years" },
              ],
            },
            {
              id: "essentials",
              planName: "Unlimited Welcome",
              pricePoints: {
                id: "pricing",
                segments: [
                  { id: "standard", amounts: [65, 110, 120, 120, 150, 180] },
                  { id: "fiftyfive", amounts: [65, 110, 120, 120, 150, 180] },
                  { id: "military", copy: "w/ Military Discount", amounts: [55, 85, 95, 100, 130, 160] },
                  { id: "firstrespond", copy: "w/ First Responder Discount", amounts: [55, 85, 95, 100, 130, 160] },
                ],
              },
            },
            {
              id: "essentialssaver",
              planName: "Unlimited Welcome",
              pricePoints: {
                id: "pricing",
                segments: [{ id: "standard", amounts: [65, 110] }],
              },
            },
          ],
        },
        {
          id: "att",
          name: "AT&T",
          selected: false,
          setMobileSelect(newValue) {
            this.selected = newValue;
          },
          plans: [
            {
              id: "esave",
              planName: "Unlimited Premium® PL",
              pricePoints: {
                id: "pricing",
                segments: [{ id: "standard", amounts: [85.99, 151.98, 182.97, 203.96, 229.95, 275.94] }],
              },
              benefits: [
                { id: "netflix", amounts: [7.99, 7.99, 7.99, 7.99, 7.99, 7.99], legal: "Sold separately" },
                { id: "appletv", amounts: [12.99, 12.99, 12.99, 12.99, 12.99, 12.99], legal: "Sold separately" },
                { id: "hulu", amounts: [11.99, 11.99, 11.99, 11.99, 11.99, 11.99], legal: "Sold separately" },
                {
                  id: "satellite",
                  amounts: [10, 20, 30, 40, 50, 60],
                  legal: "Add T-Satellite—auto connects, powers your apps",
                },
                { id: "pricelock", included: true, text: "Not Included" },
              ],
            },
            {
              id: "ebeyond",
              planName: "Unlimited Premium® PL",
              pricePoints: {
                id: "pricing",
                segments: [
                  { id: "standard", amounts: [85.99, 151.98, 182.97, 203.96, 229.95, 275.94] },
                  { id: "fiftyfive", copy: "&nbsp;", amounts: [85.99, 151.98] },
                  {
                    id: "military",
                    copy: "w/ Military Discount",
                    amounts: [64.49, 113.98, 137.22, 152.96, 172.45, 206.94],
                  },
                  {
                    id: "firstrespond",
                    copy: "w/ First Responder Discount",
                    amounts: [64.49, 113.98, 137.22, 152.96, 172.45, 206.94],
                  },
                ],
              },
              benefits: [
                { id: "netflix", amounts: [7.99, 7.99, 7.99, 7.99, 7.99, 7.99], legal: "Sold separately" },
                { id: "appletv", amounts: [12.99, 12.99, 12.99, 12.99, 12.99, 12.99], legal: "Sold separately" },
                { id: "hulu", amounts: [11.99, 11.99, 11.99, 11.99, 11.99, 11.99], legal: "Sold separately" },
                {
                  id: "satellite",
                  amounts: [10, 20, 30, 40, 50, 60],
                  legal: "Add T-Satellite—auto connects, powers your apps",
                },
                { id: "pricelock", included: true, text: "Not Included" },
              ],
            },
            {
              id: "emore",
              planName: "Unlimited Premium® PL",
              pricePoints: {
                id: "pricing",
                segments: [
                  { id: "standard", amounts: [85.99, 151.98, 182.97, 203.96, 229.95, 275.94] },
                  { id: "fiftyfive", copy: "&nbsp;", amounts: [85.99, 151.98] },
                  {
                    id: "military",
                    copy: "w/ Military Discount",
                    amounts: [64.49, 113.98, 137.22, 152.96, 172.45, 206.94],
                  },
                  {
                    id: "firstrespond",
                    copy: "w/ First Responder Discount",
                    amounts: [64.49, 113.98, 137.22, 152.96, 172.45, 206.94],
                  },
                ],
              },
              benefits: [
                { id: "netflix", amounts: [7.99, 7.99, 7.99, 7.99, 7.99, 7.99], legal: "Sold separately" },
                { id: "appletv", amounts: [12.99, 12.99, 12.99, 12.99, 12.99, 12.99], legal: "Sold separately" },
                { id: "pricelock", included: true, text: "Not Included" },
              ],
            },
            {
              id: "essentials",
              planName: "Unlimited Starter® EL",
              pricePoints: {
                id: "pricing",
                segments: [
                  { id: "standard", amounts: [65.99, 121.98, 137.97, 143.96, 154.95, 185.94] },
                  { id: "fiftyfive", planName: "55+", amounts: [40.0, 70.0] },
                  {
                    id: "military",
                    copy: "w/ Military Discount",
                    amounts: [49.49, 91.48, 103.47, 107.96, 116.2, 139.44],
                  },
                  {
                    id: "firstrespond",
                    copy: "w/ First Responder Discount",
                    amounts: [49.49, 91.48, 103.47, 107.96, 116.2, 139.44],
                  },
                ],
              },
            },
            {
              id: "essentialssaver",
              planName: "Unlimited Starter® EL",
              pricePoints: {
                id: "pricing",
                segments: [{ id: "standard", amounts: [65.99, 121.98] }],
              },
            },
          ],
        },
      ],
    };

    const planNotifications = [
      {
        crit: ["go5g-next", "age55"],
        lines: 2,
        headline: "Need 3 or more lines?",
        copy: "You'll save more on 3+ lines with the Standard version of this plan, thanks to our 3rd Line Discount promotion.",
      },
      {
        crit: ["age55"],
        lines: 2,
        headline: "Need 3 or more lines?",
        copy: "You'll save more on 3+ lines with the Standard version of this plan, thanks to our 3rd Line Free promotion.",
      },
      {
        crit: ["standard"],
        lines: 6,
        headline: "",
        copy: "You can only check out with a maximum of 5 devices at a time online. Looking to add more than 5 devices to your transaction?",
      },
    ];

    // Method that creates a new plan card
    function createPlanCard(theData) {
      let planItem = `
      <div `;
      if (theData.selected != null) {
        planItem += `tsw-selected="${theData.selected}" `;
      }
      planItem += `class="card ${theData.id}">
        <div class="card-head">
          <div class="content">
            <div class="plan">
              <h3>${theData.name}</h3>
              <span class="plan-title"></span>
            </div>
          </div>
        </div>

        <div class="card-desc"></div>
        <div class="card-total">
          <span class="line-desc est-total-hl">Estimated total</span>
          <div class="total-section">
            <span class="line-price total-price monthly price-ind">0.00</span>
            <div class="savings-banner"><span></span></div>
          </div>
        </div>
      </div>
    `;

      // Return the plan card
      return planItem;
    }

    // Method that creates a line item in the savings calculator
    function createLineItem(theData, theBenefit) {
      // Get variables from selectors
      let lineAmount = findLineCount();
      let mySeg = findSegment();
      let tmoSelect = SAVINGSCALC.querySelector(".tsw-savings-calc .plan-selectors select#tmoplan");

      // Set initial line item html
      let lineItem = ``;

      if (theData.id == "pricing") {
        let price = "";
        theData.segments.forEach((seg) => {
          if (seg.id == mySeg) {
            price = seg.amounts[lineAmount - 1];
          }
        });
        lineItem = `
            <div class="line-item" tsw-type="${theData.id}">
                <span class="line-desc">
                ${lineAmount} line(s) w/ AutoPay`;
        if (
          mySeg == "standard" &&
          lineAmount >= 3 &&
          theData.promo != undefined &&
          theData.promo &&
          tmoSelect.value != "esave"
        ) {
          lineItem += `*`;
        }
        lineItem += `</span>
                <div class="price-wrapper">
                    <span class="line-price rate monthly price-ind">
                    ${price}
                    </span>
                </div>
            </div>`;
      } else {
        let myBenLine = theData.benefits.find((ben) => ben.id == theBenefit.id);
        if (myBenLine.included) {
          lineItem = `
                  <div class="line-item" tsw-type="${myBenLine.id}">
                    <span class="line-desc">${theBenefit.copy}</span>
                    <div class="price-wrapper">
                    <span class="line-price">${myBenLine.text}</span>
                  `;
          if (myBenLine.legal != undefined) {
            lineItem += `<span class="tsw-ben-legal">${myBenLine.legal}</span>`;
          }
          lineItem += `
                    </div>
                  </div>
                `;
        } else {
          let convertedValue;
          let myPriceClasses;
          let myValue = myBenLine.amounts[parseInt(lineAmount) - 1];

          if (myValue == 0) {
            convertedValue = "Included";
            myPriceClasses = "line-price";
          } else {
            convertedValue = myValue.toFixed(2);
            myPriceClasses = "line-price rate monthly price-ind";
          }

          lineItem = `
                <div class="line-item" tsw-type="${theBenefit.id}">
                  <span class="line-desc">${theBenefit.copy}</span>
                  <div class="price-wrapper">
                  <span class="${myPriceClasses}">${convertedValue}</span>
                `;
          if (myBenLine.legal != undefined) {
            lineItem += `<span class="tsw-ben-legal">${myBenLine.legal}</span>`;
          }
          lineItem += `
                  </div>
                </div>
                `;
        }
      }

      return lineItem;
    }

    // Function that creates the value table
    function createValueTable() {
      // Find current tmo plan
      let myCurrPlan = SAVINGSCALC.querySelector(".tsw-savings-calc .plan-selectors select#tmoplan");
      let myValueData = savingsData.tmobileData.plans.find((plan) => plan.id == myCurrPlan.value);

      let myValueTable = VALUETABLE.querySelector(".tsw-value-table");

      // Update plan name
      myValueTable.querySelector(".vt-header h3 .plan-title").innerText = myValueData.planName;

      // Clear value sections
      myValueTable.querySelectorAll(".vt-section ul").forEach((list) => {
        list.innerHTML = "";
      });

      // Update value sections
      myValueData.benefits.forEach((bennie) => {
        if (bennie.valuetable) {
          let theSection = myValueTable.querySelector(`.vt-section[tsw-type='${bennie.type}'] ul`);
          // Create new line item
          let newLineItem = `<li><div class="vt-title"><img alt="" src="${bennie.icon}" />`;
          if (bennie.copy != undefined) {
            newLineItem += `<span class="desc">${bennie.copy}</span>`;
          }
          if (bennie.logo != undefined) {
            newLineItem += `<img class="${bennie.id} logo" alt="${bennie.id} logo" src="${bennie.logo}" />`;
          }
          newLineItem += `</div>`;
          if (bennie.value != undefined) {
            newLineItem += `<span class="price">${bennie.value} value</span>`;
          }
          newLineItem.innerHTML += `</li>`;
          // Append new item
          theSection.innerHTML += newLineItem;
        }
      });

      myValueData.additional_value.forEach((perk) => {
        if (perk.valuetable) {
          let theSection = myValueTable.querySelector(`.vt-section[tsw-type='${perk.type}'] ul`);
          // Create new line item
          let newLineItem = `<li><div class="vt-title"><img alt="" src="${perk.icon}" />`;
          if (perk.copy != undefined) {
            newLineItem += `<span class="desc">${perk.copy}</span>`;
          }
          if (perk.logo != undefined) {
            newLineItem += `<img class="${perk.id} logo" alt="${perk.id} logo" src="${perk.logo}" />`;
          }
          newLineItem += `</div>`;
          if (perk.value != undefined) {
            newLineItem += `<span class="price">${perk.value} value</span>`;
          }
          newLineItem.innerHTML += `</li>`;
          // Append new item
          theSection.innerHTML += newLineItem;
        }
      });
    }

    // Function that toggles the value table on/off depending on plan selection
    function toggleValueTable() {
      let myPlan = SAVINGSCALC.querySelector(".tsw-savings-calc .plan-selectors select#tmoplan").value;
      let myValueTable = document.querySelector("#tswValueTable");
      if (myPlan == "essentials" || myPlan == "essentialssaver") {
        myValueTable.style.display = "none";
      } else {
        myValueTable.style.display = "block";
      }
    }

    // Method that calculates percent savings
    function calculateSavings(compRate) {
      let tmoRate = parseFloat(
        SAVINGSCALC.querySelector(".tsw-savings-calc .calc-card-list .card.tmo .total-section .total-price").innerText
      );
      let calcSaving = compRate - tmoRate;

      // Convert to percentage
      let myDiff = tmoRate / compRate;
      myPercent = 1 - myDiff;
      myPercent *= 100;

      if (calcSaving < 0) {
        calcSaving = 0;
      }
      return myPercent.toFixed(0);
    }

    // Method that calculates the prices on each card
    function calculatePrice() {
      let curNum = findLineCount();
      let currSeg = findSegment();
      SAVINGSCALC.querySelectorAll(".tsw-savings-calc .calc-card-list .card").forEach((card) => {
        let myBanner = card.querySelector(".savings-banner");
        myBanner.innerHTML = "";

        let runningTotal = 0;
        card.querySelectorAll(".rate").forEach((rate) => {
          runningTotal += parseFloat(rate.innerText);
        });

        let adjustedTotal = runningTotal.toFixed(2);
        card.querySelector(".total-price").innerText = adjustedTotal;

        // Adjust savings message
        if (!card.classList.contains("tmo")) {
          let myPercent = calculateSavings(adjustedTotal);

          // Blocker for no savings
          if (myPercent <= 0) {
            myBanner.innerHTML = "&nbsp;";
            return;
          }

          let savingsMsg = "Save about ";
          savingsMsg += myPercent;
          savingsMsg += "% with T&#8209;Mobile";
          myBanner.innerHTML = savingsMsg;
        } else if (
          card.classList.contains("tmo") &&
          curNum >= 3 &&
          currSeg == "standard" &&
          SAVINGSCALC.querySelector(".tsw-select select").value != "essentialssaver" &&
          SAVINGSCALC.querySelector(".tsw-select select").value != "esave"
        ) {
          myBanner.innerText = "*3rd line FREE!";
        } else {
          myBanner.innerHTML = "&nbsp;";
        }
      });
    }

    // Method that sets up the dropdown options
    function setupDropdownOptions() {
      // Grab the dropdown selectors
      let tmoPlanDrop = SAVINGSCALC.querySelector(".tsw-savings-calc .plan-selectors select#tmoplan");
      let compPlanDrop = SAVINGSCALC.querySelector(".tsw-savings-calc .plan-selectors select#compplan");

      // Create new options
      savingsData.tmobileData.plans.forEach((plan) => {
        let newOption = document.createElement("option");
        newOption.setAttribute("value", plan.id);
        newOption.innerText = plan.planName;
        if (plan.selected) {
          newOption.setAttribute("selected", true);
        }
        tmoPlanDrop.append(newOption);
      });

      savingsData.carrierList.forEach((carrier) => {
        let newOption = document.createElement("option");
        newOption.setAttribute("value", carrier.id);
        newOption.innerText = carrier.name;
        if (carrier.selected) {
          newOption.setAttribute("selected", true);
        }
        compPlanDrop.append(newOption);
      });
    }

    // Method that checks the dropdown for the right selectors depending on plan conditions
    function checkPlanDropdown() {
      // Grab the dropdown selectors
      let tmoPlanDrop = SAVINGSCALC.querySelector(".tsw-savings-calc .plan-selectors select#tmoplan");
      let mySegment = findSegment();
      let myOptions = tmoPlanDrop.options;

      // Signal whether we add/remove Essential Saver
      let optionFlag = false;

      // Signal whether we add/remove Better Value
      let saverFlag = false;

      // Get current line selection
      let myInput = SAVINGSCALC.querySelector(".tsw-savings-calc .device-selector .stepper input");
      let myValue = myInput.value;

      // Run through to make sure we handle Essential Saver Plan
      if (myValue > 2 || mySegment != "standard") {
        Array.prototype.forEach.call(myOptions, (option, index) => {
          if (option.value == "essentialssaver") {
            tmoPlanDrop.remove(index);
          }
        });
      } else if (myValue <= 2 && mySegment == "standard") {
        Array.prototype.forEach.call(myOptions, (option, index) => {
          if (option.value == "essentialssaver") {
            optionFlag = true;
          }
        });
        if (!optionFlag) {
          let newOption = document.createElement("option");
          newOption.setAttribute("value", "essentialssaver");
          newOption.innerText = "Essentials Saver";
          tmoPlanDrop.add(newOption);
        }
      }

      // Run through to make sure we handle Experience Saver Plan
      if (myValue <= 2 || mySegment != "standard") {
        Array.prototype.forEach.call(myOptions, (option, index) => {
          if (option.value == "esave") {
            tmoPlanDrop.remove(index);
          }
        });
      } else if (myValue > 2 && mySegment == "standard") {
        Array.prototype.forEach.call(myOptions, (option, index) => {
          if (option.value == "esave") {
            saverFlag = true;
          }
        });
        if (!saverFlag) {
          let newOption = document.createElement("option");
          newOption.setAttribute("value", "esave");
          newOption.innerText = "Better Value";
          tmoPlanDrop.insertBefore(newOption, tmoPlanDrop.querySelector("option:first-child"));
        }
      }

      checkStepper(SAVINGSCALC.querySelector(".tsw-savings-calc .device .stepper"));
    }

    // Method that checks the dropdown the competitor compare on mobile
    function checkCompDropdown() {
      let myCompDrop = SAVINGSCALC.querySelector(".tsw-savings-calc .plan-selectors select#compplan");
      let myValue = myCompDrop.value;

      // Set object with new value
      savingsData.carrierList.forEach((carrier) => {
        if (carrier.id == myValue) {
          carrier.setMobileSelect(true);
        } else {
          carrier.setMobileSelect(false);
        }
      });

      SAVINGSCALC.querySelectorAll("[tsw-selected]").forEach((card) => {
        if (card.classList.contains(myValue)) {
          card.setAttribute("tsw-selected", true);
        } else {
          card.setAttribute("tsw-selected", false);
        }
      });
      checkStepper(SAVINGSCALC.querySelector(".tsw-savings-calc .device .stepper"));
    }

    /* Function that sets up the stepper functions for line counts */
    function setupStepper(theStepper) {
      let stepUp = theStepper.querySelector("[step-up]");
      let stepDown = theStepper.querySelector("[step-down]");
      let myValue = theStepper.querySelector("input");

      if (stepUp != null) {
        stepUp.addEventListener("click", () => {
          let myPlanValue = SAVINGSCALC.querySelector(".tsw-sd-selection select").value;
          if (myValue.value < parseInt(myValue.getAttribute("max"))) {
            myValue.value++;
          }
          if (myValue.getAttribute("tsw-for") == "phone") {
            changeChartContent(myValue.value - 1, myPlanValue);
          }

          SAVINGSCALC.querySelectorAll(".stepper input").forEach((step) => {
            if (step.getAttribute("tsw-for") == "phone") {
              step.value = myValue.value;
            }
          });

          if (myValue.getAttribute("max") == myValue.value) {
            stepUp.setAttribute("active", false);
          } else {
            stepUp.setAttribute("active", true);
          }

          if (myValue.getAttribute("min") == myValue.value) {
            stepDown.setAttribute("active", false);
          } else {
            stepDown.setAttribute("active", true);
          }

          checkPlanDropdown();
          checkStepper(SAVINGSCALC.querySelector(".tsw-savings-calc .device .stepper"));
        });
      }

      if (stepDown != null) {
        stepDown.addEventListener("click", () => {
          let myPlanValue = SAVINGSCALC.querySelector(".tsw-sd-selection select").value;
          if (myValue.value > parseInt(myValue.getAttribute("min"))) {
            myValue.value--;
          }
          if (myValue.getAttribute("tsw-for") == "phone") {
            changeChartContent(myValue.value - 1, myPlanValue);
          }

          SAVINGSCALC.querySelectorAll(".stepper input").forEach((step) => {
            if (step.getAttribute("tsw-for") == "phone") {
              step.value = myValue.value;
            }
          });

          if (myValue.getAttribute("max") == myValue.value) {
            stepUp.setAttribute("active", false);
          } else {
            stepUp.setAttribute("active", true);
          }

          if (myValue.getAttribute("min") == myValue.value) {
            stepDown.setAttribute("active", false);
          } else {
            stepDown.setAttribute("active", true);
          }

          checkPlanDropdown();
          checkStepper(SAVINGSCALC.querySelector(".tsw-savings-calc .device .stepper"));
        });
      }

      myValue.addEventListener("change", () => {
        let myPlanValue = SAVINGSCALC.querySelector(".tsw-sd-selection select").value;
        if (myValue.getAttribute("tsw-for") == "phone") {
          changeChartContent(myValue.value - 1, myPlanValue);
        }

        SAVINGSCALC.querySelectorAll(".stepper input").forEach((step) => {
          if (step.getAttribute("tsw-for") == "phone") {
            step.value = myValue.value;
          }
        });

        if (myValue.getAttribute("max") == myValue.value) {
          stepUp.setAttribute("active", false);
        } else {
          stepUp.setAttribute("active", true);
        }

        if (myValue.getAttribute("min") == myValue.value) {
          stepDown.setAttribute("active", false);
        } else {
          stepDown.setAttribute("active", true);
        }

        checkPlanDropdown();
        checkStepper(SAVINGSCALC.querySelector(".tsw-savings-calc .device .stepper"));
      });
    }

    /* Function that checks the active states of stepper buttons */
    function checkStepper(theStepper) {
      let stepUp = theStepper.querySelector("[step-up]");
      let stepDown = theStepper.querySelector("[step-down]");
      let myValue = theStepper.querySelector("input");

      if (myValue.getAttribute("max") == myValue.value) {
        stepUp.setAttribute("active", false);
      } else {
        stepUp.setAttribute("active", true);
      }

      if (myValue.getAttribute("min") == myValue.value) {
        stepDown.setAttribute("active", false);
      } else {
        stepDown.setAttribute("active", true);
      }
    }

    // Method that dynamically changes the content depending on user input
    function changeChartContent(theNum, thePlan) {
      // Knockout the plan cards
      let myCardList = SAVINGSCALC.querySelector(".tsw-savings-calc .calc-card-list");
      myCardList.innerHTML = "";

      // Grab Segment and Line Amounts
      let currSegment = findSegment();
      let myLines = theNum + 1;

      // Build the cards
      myCardList.innerHTML += createPlanCard(savingsData.tmobileData);
      savingsData.carrierList.forEach((carrier) => {
        myCardList.innerHTML += createPlanCard(carrier);
      });

      myCardList.querySelectorAll(".card").forEach((card) => {
        // Grab benefits list of card
        let myBenLines = card.querySelector(".card-desc");
        myBenLines.innerHTML = "";

        if (card.classList.contains("tmo")) {
          // Find the pricing pertaining to segment
          savingsData.tmobileData.plans.forEach((plan) => {
            if (plan.id == thePlan) {
              // Append discount tag is applicable
              let cardSegment = plan.pricePoints.segments.find((theSeg) => theSeg.id == currSegment);
              let myPlanTitle;

              // Add plan name
              if (cardSegment.planName != undefined) {
                myPlanTitle = cardSegment.planName;
              } else {
                myPlanTitle = plan.planName;
              }

              if (cardSegment.id != "standard" && cardSegment.copy != undefined) {
                myPlanTitle += `<br>${cardSegment.copy}`;
              }

              card.querySelector(".plan-title").innerHTML = myPlanTitle;
              // Add pricing
              myBenLines.innerHTML += createLineItem(plan.pricePoints);

              // Add additional lines for each benefit
              savingsData.benefitList.forEach((benefit) => {
                if (benefit.active.includes(plan.id)) {
                  myBenLines.innerHTML += createLineItem(plan, benefit);
                }
              });
            }
          });
        } else {
          savingsData.carrierList.forEach((carrier) => {
            if (card.classList.contains(carrier.id)) {
              // Add plan name
              carrier.plans.forEach((compplan) => {
                if (compplan.id == thePlan) {
                  // Append discount tag is applicable
                  let cardSegment = compplan.pricePoints.segments.find((theSeg) => theSeg.id == currSegment);
                  let myPlanTitle;

                  // Add plan name
                  if (cardSegment.planName != undefined) {
                    myPlanTitle = cardSegment.planName;
                  } else {
                    myPlanTitle = compplan.planName;
                  }

                  if (cardSegment.id != "standard" && cardSegment.copy != undefined) {
                    myPlanTitle += `<br>${cardSegment.copy}`;
                  }

                  card.querySelector(".plan-title").innerHTML = myPlanTitle;
                  // Add pricing
                  myBenLines.innerHTML += createLineItem(compplan.pricePoints);
                  // Add additional lines for each benefit
                  savingsData.benefitList.forEach((benefit) => {
                    if (benefit.active.includes(compplan.id)) {
                      myBenLines.innerHTML += createLineItem(compplan, benefit);
                    }
                  });
                }
              });
            }
          });
        }
      });

      /**********/
      calculatePrice();
      createValueTable();
      toggleValueTable();
      toggleNotification();
      checkStepper(SAVINGSCALC.querySelector(".tsw-savings-calc .device .stepper"));
    }

    /* Function that sets the segment in table */
    function setSegment(theSeg) {
      let myInput = SAVINGSCALC.querySelector(".tsw-savings-calc .device-selector .stepper input");
      let myValue = myInput.value;

      let mySegBtns = SAVINGSCALC.querySelectorAll(".tsw-savings-calc .segment-selector button");

      // Get dropdown element
      let mySegmentDropdown = SAVINGSCALC.querySelector(".tsw-savings-calc .tsw-select select");
      let myOptions = mySegmentDropdown.options;
      let myCurrPlan = mySegmentDropdown.value;
      let optionFlag = false;

      mySegBtns.forEach((seg) => {
        if (seg.classList.contains("active")) {
          seg.classList.remove("active");
        }
      });

      SAVINGSCALC.querySelector('.tsw-savings-calc .segment-selector button[tsw-value="' + theSeg + '"]').classList.add(
        "active"
      );

      // Set conditionals for the stepper
      if (theSeg == "fiftyfive") {
        myInput.setAttribute("max", 2);
        if (myValue > 2) {
          myInput.value = 2;
          myValue = 2;
        }
      } else {
        myInput.setAttribute("max", 6);
      }

      checkPlanDropdown();
      changeChartContent(myValue - 1, myCurrPlan);
      checkStepper(SAVINGSCALC.querySelector(".tsw-savings-calc .device .stepper"));
    }

    /* Function that finds and returns current segment */
    function findSegment() {
      let currSeg = SAVINGSCALC.querySelector(".tsw-savings-calc .segment-selector button.active").getAttribute(
        "tsw-value"
      );
      return currSeg;
    }

    /* Function that finds the current line amount */
    function findLineCount() {
      return SAVINGSCALC.querySelector(".device-selector .device .stepper input").value;
    }

    /* Function that toggles the plan selector notification */
    function toggleNotification() {
      let myPlan = SAVINGSCALC.querySelector(".tsw-sd-selection .tsw-select select").value;
      let mySegment = SAVINGSCALC.querySelector(".segment-selector button.active").getAttribute("tsw-value");
      let myLines = SAVINGSCALC.querySelector(".device-selector .device input").value;

      let myNotification = SAVINGSCALC.querySelector(".tsw-notification");

      if (mySegment == "fiftyfive" && myLines == 2) {
        myNotification.querySelector("span").innerText = planNotifications[1].headline;
        myNotification.querySelector("p").innerText = planNotifications[1].copy;
        if (!myNotification.classList.contains("active")) {
          myNotification.classList.add("active");
        }
        if (myNotification.classList.contains("caution")) {
          myNotification.classList.remove("caution");
        }
      } else if (myLines == 6) {
        myNotification.querySelector("span").innerText = planNotifications[2].headline;
        myNotification.querySelector("p").innerText = planNotifications[2].copy;
        if (!myNotification.classList.contains("active")) {
          myNotification.classList.add("active");
        }
        if (!myNotification.classList.contains("caution")) {
          myNotification.classList.add("caution");
        }
      } else {
        if (myNotification.classList.contains("active")) {
          myNotification.classList.remove("active");
        }
        if (!myNotification.classList.contains("caution")) {
          myNotification.classList.add("caution");
        }
      }
    }

    /* Function that initializes the cart start on CTA click */
    async function scTriggerCartStart() {
      // Key Value Pairs
      const MY_PLAN_MAP = {
        segments: [
          { key: "standard", value: "Consumer" },
          { key: "fiftyfive", value: "55+" },
          { key: "military", value: "MILITARY" },
          { key: "firstrespond", value: "FIRST_RESPONDER" },
        ],
        action: [
          { key: ["standard", "ebeyond"], lines: [1, 2, 3, 4, 5, 6], value: "C25L2T1" },
          { key: ["standard", "emore"], lines: [1, 2, 3, 4, 5, 6], value: "C25L2T2" },
          { key: ["standard", "essentials"], lines: [3, 5, 6], value: "TESS2L" },
          { key: ["standard", "essentials"], lines: [1, 2], value: "PR1LESS" },
          { key: ["standard", "essentials"], lines: [4], value: "4LNESSPRO" },
          { key: ["fiftyfive", "ebeyond"], lines: [1, 2, 3, 4, 5, 6], value: "C255L2T1" },
          { key: ["fiftyfive", "emore"], lines: [1, 2, 3, 4, 5, 6], value: "C255L2T2" },
          { key: ["fiftyfive", "essentials"], lines: [1, 2, 3, 4, 5, 6], value: "ESENT552L" },
          { key: ["military", "ebeyond"], lines: [1, 2, 3, 4, 5, 6], value: "C25ML2T1" },
          { key: ["military", "emore"], lines: [1, 2, 3, 4, 5, 6], value: "C25ML2T2" },
          { key: ["military", "essentials"], lines: [1, 2, 3, 4, 5, 6], value: "ESSMIL2L" },
          { key: ["firstrespond", "ebeyond"], lines: [1, 2, 3, 4, 5, 6], value: "C25FL2T1" },
          { key: ["firstrespond", "emore"], lines: [1, 2, 3, 4, 5, 6], value: "C25FL2T2" },
          { key: ["firstrespond", "essentials"], lines: [1, 2, 3, 4, 5, 6], value: "ESSFR2L" },
        ],
      };

      // Get values from calculator
      let currentSegment = SAVINGSCALC.querySelector(".tsw-savings-calc .segment-selector .active").getAttribute(
        "tsw-value"
      );
      let currentLineAmount = SAVINGSCALC.querySelector(".tsw-savings-calc .device-selector .stepper input").value;
      let lineIntValue = parseInt(currentLineAmount);
      let currentPlanType = SAVINGSCALC.querySelector(".tsw-savings-calc .tsw-select select").value;

      // Map out routing for PHX ctas
      let phxSegment;
      MY_PLAN_MAP.segments.forEach((seg) => {
        if (seg.key == currentSegment) {
          phxSegment = seg.value;
        }
      });

      let phxSoc;
      MY_PLAN_MAP.action.forEach((posAction) => {
        if (
          posAction.key.includes(currentSegment) &&
          posAction.key.includes(currentPlanType) &&
          posAction.lines.includes(lineIntValue)
        ) {
          phxSoc = posAction.value;
        }
      });

      console.log("PHX Soc Set Success: " + phxSoc);

      // PHX Mapping
      window.phoenix.bus.publish("COUNTER", "CHANGE", { payload: { PHONES: parseInt(currentLineAmount) } });
      document
        .querySelector('[data-xpr-category-key="' + phxSegment + '"]')
        .querySelector("input")
        .click();
      await window.phoenix.persistedState.set("PLANS_LINES_INCREMENTOR", { PHONES: currentLineAmount });
      return phxSoc;
    }

    // Event listeners for generating new content per user input
    window.onload = () => {
      // Setup the line selector stepper
      SAVINGSCALC.querySelectorAll(".stepper").forEach((stepper) => {
        setupStepper(stepper);
      });

      // Setup the plan selector
      SAVINGSCALC.querySelector(".tsw-sd-selection select").addEventListener("change", () => {
        let mySelect = SAVINGSCALC.querySelector(".tsw-sd-selection select");
        let myStepper = SAVINGSCALC.querySelector(".device-selector .device .stepper");
        let myInput = myStepper.querySelector("input");
        let myNum = myInput.value;
        changeChartContent(myNum - 1, mySelect.value);
        if (mySelect.value != "" && !mySelect.classList.contains("active")) {
          mySelect.classList.add("active");
        } else if (mySelect.value == "" && mySelect.classList.contains("active")) {
          mySelect.classList.remove("active");
        }

        // Set conditionals for essentials saver and better value
        let mySegments = SAVINGSCALC.querySelectorAll(".segment-selector button");

        // Conditions for Essential Saver and Better Value
        if (mySelect.value == "esave") {
          mySegments.forEach((seg) => {
            if (seg.getAttribute("tsw-value") == "standard") {
              seg.classList = "active";
            } else {
              seg.classList = "";
              seg.disabled = true;
            }
          });
          myInput.setAttribute("min", 3);
          myInput.setAttribute("max", 6);
        } else if (mySelect.value == "essentialssaver") {
          mySegments.forEach((seg) => {
            if (seg.getAttribute("tsw-value") == "standard") {
              seg.classList = "active";
            } else {
              seg.classList = "";
              seg.disabled = true;
            }
          });
          myInput.setAttribute("max", 2);
        } else {
          mySegments.forEach((seg) => {
            if (seg.disabled) {
              seg.disabled = false;
            }
          });
          if (findSegment() != "fiftyfive") {
            myInput.setAttribute("max", 6);
          }
          myInput.setAttribute("min", 1);
        }

        checkStepper(myStepper);
      });

      // Setup the competitor selector
      SAVINGSCALC.querySelector(".tsw-sd-selection select#compplan").addEventListener("change", checkCompDropdown);

      // Set up all the segment filtering
      let mySegments = SAVINGSCALC.querySelector(".tsw-savings-calc .segment-selector");
      mySegments.querySelectorAll("button").forEach((segBtn) => {
        segBtn.addEventListener("click", () => {
          setSegment(segBtn.getAttribute("tsw-value"));
        });
      });

      // Add event listener for starting cart after savings calculator selections
      if (document.querySelector("#savings-calc-cart-start") != null) {
        document.querySelector("#savings-calc-cart-start").addEventListener("click", () => {
          scTriggerCartStart().then((socValue) => {
            document.querySelector('[data-upf-plans-billing-soc="' + socValue + '"] .upf-planCard__CTA').click();
            console.log("Pass Success: " + socValue);
          });
        });
      }

      setupDropdownOptions();
      checkPlanDropdown();
      changeChartContent(2, "emore");
      checkStepper(SAVINGSCALC.querySelector(".tsw-savings-calc .device .stepper"));
    };

    // Setup globals for multiple NPI components
    const SAVINGSCALC = document
      .querySelector("#tswSavingsCalc")
      .querySelector("xpr-npi-content")
      .shadowRoot.querySelector(".tsw-main");
    const VALUETABLE = document
      .querySelector("#tswValueTable")
      .querySelector("xpr-npi-content")
      .shadowRoot.querySelector(".tsw-main");
  </script>
</div>
